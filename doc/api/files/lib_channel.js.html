<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib\channel.js - EeeZorBot API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="EeeZorBot API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/api.html">api</a></li>
                                <li><a href="../classes/Channel.html">Channel</a></li>
                                <li><a href="../classes/debug.html">debug</a></li>
                                <li><a href="../classes/Listdb.html">Listdb</a></li>
                                <li><a href="../classes/log.html">log</a></li>
                                <li><a href="../classes/owners.html">owners</a></li>
                                <li><a href="../classes/Script.html">Script</a></li>
                                <li><a href="../classes/server.html">server</a></li>
                                <li><a href="../classes/stdin.html">stdin</a></li>
                                <li><a href="../classes/tools.html">tools</a></li>
                                <li><a href="../classes/User.html">User</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/api.html">api</a></li>
                                <li><a href="../modules/channel.html">channel</a></li>
                                <li><a href="../modules/debug.html">debug</a></li>
                                <li><a href="../modules/listdb.html">listdb</a></li>
                                <li><a href="../modules/log.html">log</a></li>
                                <li><a href="../modules/owners.html">owners</a></li>
                                <li><a href="../modules/script.html">script</a></li>
                                <li><a href="../modules/server.html">server</a></li>
                                <li><a href="../modules/stdin.html">stdin</a></li>
                                <li><a href="../modules/tools.html">tools</a></li>
                                <li><a href="../modules/user.html">user</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: lib\channel.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var User = require(&#x27;./user.js&#x27;),
	debug = require(&#x27;./debug.js&#x27;),
	tools = require(&#x27;./tools.js&#x27;);
/**
 * Channel class
 * @module channel
 * @main
 * @class Channel
 * @param {Server} server The server the channel is created on
 * @param {string} name the name of the channel (ie: &quot;#irp&quot;)
 * @constructor
 */
module.exports = function(server,name){
	var self = this,
		topic = null;
	/**
	 * Name of the channel
	 * @type {string}
	 * @property name
	 */
	self.name = name;
	/**
	 * Is the bot in the channel?
	 * @type {boolean}
	 * @property active
	 */
	self.active = false;
	/**
	 * Channel modes
	 * @type {Array}
	 * @property modes
	 */
	self.modes = [];
	/**
	 * Contains the topic of the channel and tries to change it if set
	 * @type {String}
	 * @property topic
	 */
	Object.defineProperty(self,&#x27;topic&#x27;,{
		set: function(val){
			self.server.send(&#x27;TOPIC &#x27;+self.name+&#x27; &#x27;+val);
		},
		get: function(){
			return topic;
		},
		enumerable: true
	});
	/**
	 * Interface for setting the topic internally
	 * @property _topic
	 * @private
	 */
	Object.defineProperty(self,&#x27;_topic&#x27;,{
		set: function(val){
			topic = val;
		},
		enumerable: false
	});
	/**
	 * Parent server
	 * @type {Server}
	 * @property server
	 * @static
	 */
	Object.defineProperty(self,&#x27;server&#x27;,{
		value: server,
		enumerable: true
	});
	/**
	 * Runs a /who on the channel, refreshing user data
	 * @method who
	 * @chainable
	 */
	self.who = function(){
		var i,
			user;
		while(self.users.length &gt; 0){
			user = self.users[0];
			user.channels.splice(user.channels.indexOf(self));
		}
		self.server.send(&#x27;WHO &#x27;+self.name);
		return self;
	};
	/**
	 * Returns an array of all the users in the channel
	 * @property users
	 * @return {Array} users
	 */
	Object.defineProperty(self,&#x27;users&#x27;,{
		get: function(){
			var users = [],
				i,
				user;
			for(i=0;i&lt;server.users.length;i++){
				user = server.users[i];
				if(user.channels.indexOf(self) != -1){
					users.push(user);
				}
			}
			return users;
		},
		enumerable: true
	});
	/**
	 * Sets the mode of the channel, or users in the channel
	 * @method mode
	 * @param {string} modes String containing the modes (ie: &quot;+o-v&quot;)
	 * @param {Array} [users] A list of users (nick or User objects) to apply the modes to
	 * @chainable
	 */
	self.mode = function(modes,users){
		// TODO - fix
		if(users === undefined){
			self.server.send(&#x27;mode &#x27;+self.name+&#x27; &#x27;+modes);
		}else{
			var i,
				u;
			users = users instanceof Array?users:[users];
			for(i=0;i&lt;users.length;i++){
				u = users[i];
				if(u instanceof User){
					u = u.nick;
				}
				self.server.send(&#x27;mode &#x27;+self.name+&#x27; &#x27;+modes+&#x27; &#x27;+u);
			}
		}
		return self;
	};
	/**
	 * Leave the channel
	 * @method part
	 * @chainable
	 */
	self.part = function(){
		self.server.send(&#x27;part &#x27;+self.name);
		self.active = false;
		return self;
	};
	/**
	 * Join the channel
	 * @method join
	 * @chainable
	 */
	self.join = function(){
		self.server.send(&#x27;join &#x27;+self.name);		// join channel
		self.active = true;
		return self;
	};
	/**
	 * Send a message to the channel
	 * @method send
	 * @param {String} msg Message to send to the channel
	 * @chainable
	 */
	self.send = function(msg){
		self.server.send(&#x27;PRIVMSG &#x27;+self.name+&#x27; :&#x27;+msg);
		return self;
	};
	return self;
};
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
